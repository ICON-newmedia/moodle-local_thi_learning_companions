{"version":3,"file":"learningcompanions.min.js","sources":["../src/learningcompanions.js"],"sourcesContent":["/* eslint no-console:off */\r\ndefine(['jquery', 'core/str', 'core/yui', 'core/modal_factory'], function($, Str, Y, ModalFactory){\r\n    return {\r\n        getcourseid: function() {\r\n            var entries = document.getElementsByTagName('body')[0].classList;\r\n            var myArray = Array.from(entries);\r\n            var courseid = myArray.reduce((a, b) => {\r\n                if (b.indexOf('course-2') === 0) {\r\n                    return b.substr(7);\r\n                }\r\n                return a;\r\n            });\r\n            if (typeof courseid === \"undefined\" || courseid.length === 0) {\r\n                return false;\r\n            }\r\n            return parseInt(courseid);\r\n        },\r\n        init: function(cssselector, bgcolor, textcolor, borderradius) {\r\n            var courseid = this.getcourseid();\r\n            if (!courseid) {\r\n                return;\r\n            }\r\n            const isColor = (strColor) => {\r\n                const s = new Option().style;\r\n                s.color = strColor;\r\n                return s.color !== '';\r\n            };\r\n            if (!isColor(bgcolor)) {\r\n                bgcolor = '#333';\r\n            }\r\n            if (!isColor(textcolor)) {\r\n                textcolor = '#fff';\r\n            }\r\n            borderradius = parseInt(borderradius);\r\n            /*\r\n          Str.get_strings([\r\n              {key: 'group-me-up', component: 'local_learningcompanions'}\r\n          ]).then(function(strings) {\r\n              $(cssselector).append(\r\n                  '<div class=\"learningcompanions-group-me-up\" ' +\r\n                  'style=\"background-color:' + bgcolor + ';' +\r\n                  'color:' + textcolor + ';' +\r\n                  'border-radius: ' + borderradius + 'px\"' +\r\n                  '><a class=\"learningcompanions-group-me-up-button\" href=\"#' +\r\n                  // ICTODO: replace the link below with link to group overview:\r\n                  // list of groups for this course where you can join or create a new group\r\n                  M.cfg.wwwroot + '/local/learningcompanions/creategroup.php?courseid=' + courseid + '&layout=embedded\"' +\r\n                  '>' + strings[0] + '</a></div>');\r\n\r\n              var buttons = $('.learningcompanions-group-me-up-button');\r\n\r\n             var trigger = buttons.get(0);\r\n              ModalFactory.create({\r\n                  title: 'test title',\r\n                  body: '<p>test body content</p>',\r\n                  footer: 'test footer content',\r\n              }, trigger)\r\n                  .done(function(modal) {\r\n                      // Do what you want with your new modal.\r\n\r\n                      // Maybe... add a class to the modal dialog, to be able to style it.\r\n                      console.log('my modal is done :)', modal);\r\n                      // modal.getRoot().addClass('mydialog');\r\n                  });\r\n              // for (let a = 0; a < buttons.length; a++) {\r\n              //     var lightbox = M.util.add_lightbox(Y, Y.Node(buttons.get(0)));\r\n              //     lightbox.show();\r\n              // }\r\n              return null;\r\n              // $('.learningcompanions-group-me-up-button').each((index, element) => {\r\n              //     // ICTODO: using the lightbox doesn't work yet\r\n              //     console.log('add lightbox to: ', index, element, 'M:', M, 'Y:', Y);\r\n              //     M.util.add_lightbox(Y, Y.Node(element.get(0)));\r\n              // });\r\n\r\n\r\n            });\r\n            */\r\n        }\r\n    };\r\n});\r\n"],"names":["define","$","Str","Y","ModalFactory","getcourseid","entries","document","getElementsByTagName","classList","courseid","Array","from","reduce","a","b","indexOf","substr","length","parseInt","init","cssselector","bgcolor","textcolor","borderradius","this","isColor","strColor","s","Option","style","color"],"mappings":"AACAA,qDAAO,CAAC,SAAU,WAAY,WAAY,uBAAuB,SAASC,EAAGC,IAAKC,EAAGC,oBAC1E,CACHC,YAAa,eACLC,QAAUC,SAASC,qBAAqB,QAAQ,GAAGC,UAEnDC,SADUC,MAAMC,KAAKN,SACFO,QAAO,CAACC,EAAGC,IACA,IAA1BA,EAAEC,QAAQ,YACHD,EAAEE,OAAO,GAEbH,gBAEa,IAAbJ,UAAgD,IAApBA,SAASQ,QAGzCC,SAAST,WAEpBU,KAAM,SAASC,YAAaC,QAASC,UAAWC,kBAC7BC,KAAKpB,2BAIdqB,QAAWC,iBACPC,GAAI,IAAIC,QAASC,aACvBF,EAAEG,MAAQJ,SACS,KAAZC,EAAEG,OAERL,QAAQJ,WACTA,QAAU,QAETI,QAAQH,aACTA,UAAY,QAEhBC,aAAeL,SAASK"}