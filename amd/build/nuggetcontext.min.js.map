{"version":3,"file":"nuggetcontext.min.js","sources":["../src/nuggetcontext.js"],"sourcesContent":["define(['jquery', 'core/ajax', 'core/notification'], function ($, Ajax, Notification) {\n    return {\n        /**\n         * Source of data for Ajax element.\n         *\n         * @param {String} selector The selector of the auto complete element.\n         * @param {String} query The query string.\n         * @param {Function} callback A callback function receiving an array of results.\n         * @param {Function} failure A callback function to be called in case of failure, receiving the error message.\n         * @return {Void}\n         */\n        transport: function (selector, query, callback, failure) {\n            var courseid = parseInt($('#id_courseid').val());\n            if (isNaN(courseid)) {\n                courseid = null;\n            }\n            Ajax.call([{\n                methodname: 'local_thi_learning_companions_nugget_list',\n                args: {\n                    courseid: courseid,\n                    query: query\n                },\n                done: function (data) {\n                    // ICTODO: do something\n                },\n                fail: Notification.exception\n            }])[0].then(callback).catch (failure);\n        },\n\n        /**\n         * Process the results for auto complete elements.\n         *\n         * @param {String} selector The selector of the auto complete element.\n         * @param {Array} results An array or results.\n         * @return {Array} New array of results.\n         */\n        processResults: function (selector, results) {\n            var options = [];\n            $.each(results, function(index, data) {\n                options.push({\n                    value: data.id,\n                    label: data.name\n                });\n            });\n            return options;\n        }\n    };\n});"],"names":["define","$","Ajax","Notification","transport","selector","query","callback","failure","courseid","parseInt","val","isNaN","call","methodname","args","done","data","fail","exception","then","catch","processResults","results","options","each","index","push","value","id","label","name"],"mappings":"AAAAA,qDAAO,CAAC,SAAU,YAAa,sBAAsB,SAAUC,EAAGC,KAAMC,oBAC7D,CAUHC,UAAW,SAAUC,SAAUC,MAAOC,SAAUC,aACxCC,SAAWC,SAAST,EAAE,gBAAgBU,OACtCC,MAAMH,YACNA,SAAW,MAEfP,KAAKW,KAAK,CAAC,CACPC,WAAY,4CACZC,KAAM,CACFN,SAAUA,SACVH,MAAOA,OAEXU,KAAM,SAAUC,QAGhBC,KAAMf,aAAagB,aACnB,GAAGC,KAAKb,UAAUc,MAAOb,UAUjCc,eAAgB,SAAUjB,SAAUkB,aAC5BC,QAAU,UACdvB,EAAEwB,KAAKF,SAAS,SAASG,MAAOT,MAC5BO,QAAQG,KAAK,CACTC,MAAOX,KAAKY,GACZC,MAAOb,KAAKc,UAGbP"}