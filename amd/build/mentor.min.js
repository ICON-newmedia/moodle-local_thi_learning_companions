define("local_learningcompanions/mentor",["jquery","core/config","core/str","core/modal_factory","core/modal_events","local_learningcompanions/datatables-helpers","local_learningcompanions/datatables","local_learningcompanions/select2"],(function($,c,str,ModalFactory,ModalEvents,datatablesHelpers){return{select2:function(){$(".select2").select2()},init:function(){!async function(){datatablesHelpers.initMinSearch(".js-mentor-filter--min"),datatablesHelpers.initIncludeSearch(".js-mentor-filter--includes");const languageUrl=await str.get_string("datatables_url","local_learningcompanions");$("#askedquestionstable").DataTable({language:{url:languageUrl},initComplete:function(){datatablesHelpers.makeTablesFullWidth()}}),$("#mymentorquestionstable").DataTable({language:{url:languageUrl},initComplete:function(){datatablesHelpers.makeTablesFullWidth()}}),$("#allmentorquestionstable").DataTable({language:{url:languageUrl},initComplete:function(){datatablesHelpers.makeTablesFullWidth()}}),$("#allmentorstable").DataTable({dom:"lrtip",language:{url:languageUrl},initComplete:function(){const table=this.api();datatablesHelpers.setupSearchRules(".js-mentor-filter--search",table),datatablesHelpers.addRedrawEvent(".js-mentor-filter",table),datatablesHelpers.makeTablesFullWidth()},columnDefs:[{orderable:!1,visible:!1,targets:"no-show"}]}),$(".lc_datatable").DataTable({language:{url:languageUrl},initComplete:function(){datatablesHelpers.makeTablesFullWidth()}})}(),$(".askedquestions-delete").click((function(e){e.preventDefault();const questionid=$(this).data("qid");var strings=[{key:"modal-deletemyquestion-title",component:"local_learningcompanions"},{key:"modal-deletemyquestion-text",component:"local_learningcompanions",param:$(this).data("question")},{key:"modal-deletemyquestion-okaybutton",component:"local_learningcompanions"},{key:"modal-deletemyquestion-cancelbutton",component:"local_learningcompanions"}];str.get_strings(strings).then((function(strings){return ModalFactory.create({title:strings[0],body:'<div id="mentor-deletemyquestion-modal"><div id="mentor-deletemyquestion-modal-text">'+strings[1]+"</div></div>",footer:'<div id="mentor-deletemyquestion-modal-buttons"><button class="btn btn-primary" aria-hidden="true" id="mentor-deletemyquestion-modal-delete" data-qid="'+questionid+'">'+strings[2]+'</button><button class="btn btn-secondary" aria-hidden="true" id="mentor-deletemyquestion-modal-close" data-action="hide">'+strings[3]+"</button></div>"})})).then((function(modal){modal.getRoot().on(ModalEvents.hidden,(function(){modal.destroy()})),modal.show()}))})),$("body").on("click","#mentor-deletemyquestion-modal-delete",(function(){const questionid=$(this).data("qid");$.ajax({url:M.cfg.wwwroot+"/local/learningcompanions/ajax/ajax.php",method:"POST",dataType:"json",data:{action:"deletemyquestion",questionid:questionid},success:function(data){window.location.href="fail"===data?M.cfg.wwwroot+"/local/learningcompanions/mentor/index.php?n=n_d":M.cfg.wwwroot+"/local/learningcompanions/mentor/index.php?n=d"}})})),$("body").on("click","#mentor-deletemyquestion-modal-close",(function(){$(".modal").remove()}))}}}));

//# sourceMappingURL=mentor.min.js.map