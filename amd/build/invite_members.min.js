define("local_learningcompanions/invite_members",["exports","jquery","local_learningcompanions/repository","core/templates","core/key_codes"],(function(_exports,_jquery,_repository,_templates,_key_codes){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_templates=_interopRequireDefault(_templates),_key_codes=_interopRequireDefault(_key_codes);_exports.init=function(){(0,_jquery.default)(".js-invite-member-search-btn").click(handleSearchInviteButton),(0,_jquery.default)(".js-invite-member-input").keyup(handleSearchKeyup),(0,_jquery.default)(".js-invite-member-btn").click(handleInviteSubmit)};var _ref,_ref2,handleSearchInviteButton=(_ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(e){var groupId,searchString,users,_yield$Template$rende,html;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return e.preventDefault(),groupId=(0,_jquery.default)(this).data("groupid"),searchString=(0,_jquery.default)(".js-invite-member-input").val(),_context.next=5,(0,_repository.getInvitableUsers)(searchString,groupId);case 5:return users=_context.sent,_context.next=8,_templates.default.renderForPromise("local_learningcompanions/group/group_invite_list",{users:users});case 8:_yield$Template$rende=_context.sent,html=_yield$Template$rende.html,(0,_jquery.default)(".js-invite-member-list").html(html);case 11:case"end":return _context.stop()}}),_callee,this)}))),function(_x){return _ref.apply(this,arguments)}),handleSearchKeyup=function(e){e.keyCode===_key_codes.default.enter&&handleSearchInviteButton.bind((0,_jquery.default)(".js-invite-member-search-btn"))(e)},handleInviteSubmit=(_ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(e){var groupId,userId,_yield$inviteUser,errorcode;return regeneratorRuntime.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return e.preventDefault(),groupId=(0,_jquery.default)(this).data("groupid"),userId=+(0,_jquery.default)("input.js-invite-radio[type=radio]:checked").val(),_context2.next=5,(0,_repository.inviteUser)(userId,groupId);case 5:_yield$inviteUser=_context2.sent,0===(errorcode=_yield$inviteUser.errorcode)?window.location.reload():console.log(errorcode);case 8:case"end":return _context2.stop()}}),_callee2,this)}))),function(_x2){return _ref2.apply(this,arguments)})}));

//# sourceMappingURL=invite_members.min.js.map