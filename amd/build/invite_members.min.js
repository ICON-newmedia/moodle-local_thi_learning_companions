define("local_learningcompanions/invite_members",["exports","jquery","local_learningcompanions/repository","core/templates","core/key_codes"],(function(_exports,_jquery,_repository,_templates,_key_codes){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_templates=_interopRequireDefault(_templates),_key_codes=_interopRequireDefault(_key_codes);_exports.init=()=>{(0,_jquery.default)(".js-invite-member-search-btn").click(handleSearchInviteButton),(0,_jquery.default)(".js-invite-member-input").keyup(handleSearchKeyup),(0,_jquery.default)(".js-invite-member-btn").click(handleInviteSubmit)};const handleSearchInviteButton=async function(e){e.preventDefault();const groupId=(0,_jquery.default)(this).data("groupid"),searchString=(0,_jquery.default)(".js-invite-member-input").val();(0,_jquery.default)(".js-invite-member-btn").attr("disabled",!0);const users=await(0,_repository.getInvitableUsers)(searchString,groupId),checked=1===users.length?"checked":"",{html:html}=await _templates.default.renderForPromise("local_learningcompanions/group/group_invite_list",{users:users,checked:checked});checked&&enableSubmitbutton(),(0,_jquery.default)(".js-invite-member-list").html(html),(0,_jquery.default)(".js-invite-radio").click(enableSubmitbutton)},handleSearchKeyup=function(e){e.keyCode===_key_codes.default.enter&&handleSearchInviteButton.bind((0,_jquery.default)(".js-invite-member-search-btn"))(e)},enableSubmitbutton=function(){(0,_jquery.default)(".js-invite-member-btn").removeAttr("disabled")},handleInviteSubmit=async function(e){e.preventDefault();const groupId=(0,_jquery.default)(this).data("groupid"),userId=+(0,_jquery.default)("input.js-invite-radio[type=radio]:checked").val(),{errorcode:errorcode}=await(0,_repository.inviteUser)(userId,groupId);0===errorcode?window.location.reload():console.log(errorcode)}}));

//# sourceMappingURL=invite_members.min.js.map