{"version":3,"file":"invite_members.min.js","sources":["../src/invite_members.js"],"sourcesContent":["/* eslint-disable no-console */\nimport $ from 'jquery';\nimport {getInvitableUsers, inviteUser} from \"local_learningcompanions/repository\";\nimport Template from 'core/templates';\nimport KeyCodes from 'core/key_codes';\n\nexport const init = () => {\n    $('.js-invite-member-search-btn').click(handleSearchInviteButton);\n    $('.js-invite-member-input').keyup(handleSearchKeyup);\n    $('.js-invite-member-btn').click(handleInviteSubmit);\n};\n\nconst handleSearchInviteButton = async function(e) {\n    e.preventDefault();\n\n    const groupId = $(this).data('groupid');\n    const searchString = $('.js-invite-member-input').val();\n    $('.js-invite-member-btn').attr('disabled', true);\n\n    const users = await getInvitableUsers(searchString, groupId);\n    const checked = users.length === 1 ? 'checked' : '';\n\n    const {html} = await Template.renderForPromise('local_learningcompanions/group/group_invite_list', {\n        users,\n        checked,\n    });\n\n    if (checked) {\n        enableSubmitbutton();\n    }\n\n    $('.js-invite-member-list').html(html);\n    $('.js-invite-radio').click(enableSubmitbutton);\n};\n\nconst handleSearchKeyup = function(e) {\n    if (e.keyCode === KeyCodes.enter) {\n        handleSearchInviteButton.bind($('.js-invite-member-search-btn'))(e);\n    }\n};\n\nconst enableSubmitbutton = function() {\n    const submitButton = $('.js-invite-member-btn');\n    submitButton.removeAttr('disabled');\n};\n\nconst handleInviteSubmit = async function(e) {\n    e.preventDefault();\n\n    const groupId = $(this).data('groupid');\n    const userId = +$('input.js-invite-radio[type=radio]:checked').val();\n\n    const {errorcode} = await inviteUser(userId, groupId);\n\n    if (errorcode === 0) {\n        window.location.reload();\n    } else {\n        console.log(errorcode);\n    }\n};\n"],"names":["click","handleSearchInviteButton","keyup","handleSearchKeyup","handleInviteSubmit","e","preventDefault","groupId","this","data","searchString","val","attr","users","checked","length","Template","renderForPromise","html","enableSubmitbutton","keyCode","KeyCodes","enter","bind","removeAttr","userId","errorcode","window","location","reload","console","log"],"mappings":"6iCAMoB,+BACd,gCAAgCA,MAAMC,8CACtC,2BAA2BC,MAAMC,uCACjC,yBAAyBH,MAAMI,oCAG/BH,0EAA2B,iBAAeI,iLAC5CA,EAAEC,iBAEIC,SAAU,mBAAEC,MAAMC,KAAK,WACvBC,cAAe,mBAAE,2BAA2BC,0BAChD,yBAAyBC,KAAK,YAAY,oBAExB,iCAAkBF,aAAcH,uBAA9CM,oBACAC,QAA2B,IAAjBD,MAAME,OAAe,UAAY,oBAE5BC,mBAASC,iBAAiB,mDAAoD,CAC/FJ,MAAAA,MACAC,QAAAA,sDAFGI,2BAAAA,KAKHJ,SACAK,yCAGF,0BAA0BD,KAAKA,0BAC/B,oBAAoBlB,MAAMmB,mIAG1BhB,kBAAoB,SAASE,GAC3BA,EAAEe,UAAYC,mBAASC,OACvBrB,yBAAyBsB,MAAK,mBAAE,gCAAhCtB,CAAiEI,IAInEc,mBAAqB,YACF,mBAAE,yBACVK,WAAW,aAGtBpB,qEAAqB,kBAAeC,iKACtCA,EAAEC,iBAEIC,SAAU,mBAAEC,MAAMC,KAAK,WACvBgB,SAAU,mBAAE,6CAA6Cd,wBAErC,0BAAWc,OAAQlB,iDAE3B,KAFXmB,4BAAAA,WAGHC,OAAOC,SAASC,SAEhBC,QAAQC,IAAIL"}