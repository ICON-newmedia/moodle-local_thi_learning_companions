{"version":3,"file":"invite_members.min.js","sources":["../src/invite_members.js"],"sourcesContent":["/* eslint-disable no-console */\r\nimport $ from 'jquery';\r\nimport {getInvitableUsers, inviteUser} from \"local_learningcompanions/repository\";\r\nimport Template from 'core/templates';\r\nimport KeyCodes from 'core/key_codes';\r\n\r\nexport const init = () => {\r\n    $('.js-invite-member-search-btn').click(handleSearchInviteButton);\r\n    $('.js-invite-member-input').keyup(handleSearchKeyup);\r\n    $('.js-invite-member-btn').click(handleInviteSubmit);\r\n};\r\n\r\nconst handleSearchInviteButton = async function(e) {\r\n    e.preventDefault();\r\n\r\n    const groupId = $(this).data('groupid');\r\n    const searchString = $('.js-invite-member-input').val();\r\n\r\n    const users = await getInvitableUsers(searchString, groupId);\r\n\r\n    const {html} = await Template.renderForPromise('local_learningcompanions/group/group_invite_list', {\r\n        users\r\n    });\r\n\r\n    $('.js-invite-member-list').html(html);\r\n};\r\n\r\nconst handleSearchKeyup = function(e) {\r\n    if (e.keyCode === KeyCodes.enter) {\r\n        handleSearchInviteButton.bind($('.js-invite-member-search-btn'))(e);\r\n    }\r\n};\r\n\r\nconst handleInviteSubmit = async function(e) {\r\n    e.preventDefault();\r\n\r\n    const groupId = $(this).data('groupid');\r\n    const userId = +$('input.js-invite-radio[type=radio]:checked').val();\r\n\r\n    const {errorcode} = await inviteUser(userId, groupId);\r\n\r\n    if (errorcode === 0) {\r\n        window.location.reload();\r\n    } else {\r\n        console.log(errorcode);\r\n    }\r\n};\r\n"],"names":["click","handleSearchInviteButton","keyup","handleSearchKeyup","handleInviteSubmit","async","e","preventDefault","groupId","this","data","searchString","val","users","html","Template","renderForPromise","keyCode","KeyCodes","enter","bind","userId","errorcode","window","location","reload","console","log"],"mappings":"6fAMoB,yBACd,gCAAgCA,MAAMC,8CACtC,2BAA2BC,MAAMC,uCACjC,yBAAyBH,MAAMI,2BAG/BH,yBAA2BI,eAAeC,GAC5CA,EAAEC,uBAEIC,SAAU,mBAAEC,MAAMC,KAAK,WACvBC,cAAe,mBAAE,2BAA2BC,MAE5CC,YAAc,iCAAkBF,aAAcH,UAE9CM,KAACA,YAAcC,mBAASC,iBAAiB,mDAAoD,CAC/FH,MAAAA,4BAGF,0BAA0BC,KAAKA,OAG/BX,kBAAoB,SAASG,GAC3BA,EAAEW,UAAYC,mBAASC,OACvBlB,yBAAyBmB,MAAK,mBAAE,gCAAhCnB,CAAiEK,IAInEF,mBAAqBC,eAAeC,GACtCA,EAAEC,uBAEIC,SAAU,mBAAEC,MAAMC,KAAK,WACvBW,SAAU,mBAAE,6CAA6CT,OAEzDU,UAACA,iBAAmB,0BAAWD,OAAQb,SAE3B,IAAdc,UACAC,OAAOC,SAASC,SAEhBC,QAAQC,IAAIL"}