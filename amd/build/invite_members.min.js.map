{"version":3,"file":"invite_members.min.js","sources":["../src/invite_members.js"],"sourcesContent":["/* eslint-disable no-console */\nimport $ from 'jquery';\nimport {getInvitableUsers, inviteUser} from \"local_learningcompanions/repository\";\nimport Template from 'core/templates';\nimport KeyCodes from 'core/key_codes';\n\nexport const init = () => {\n    $('.js-invite-member-search-btn').click(handleSearchInviteButton);\n    $('.js-invite-member-input').keyup(handleSearchKeyup);\n    $('.js-invite-member-btn').click(handleInviteSubmit);\n};\n\nconst handleSearchInviteButton = async function(e) {\n    e.preventDefault();\n\n    const groupId = $(this).data('groupid');\n    const searchString = $('.js-invite-member-input').val();\n\n    const users = await getInvitableUsers(searchString, groupId);\n\n    const {html} = await Template.renderForPromise('local_learningcompanions/group/group_invite_list', {\n        users\n    });\n\n    $('.js-invite-member-list').html(html);\n};\n\nconst handleSearchKeyup = function(e) {\n    if (e.keyCode === KeyCodes.enter) {\n        handleSearchInviteButton.bind($('.js-invite-member-search-btn'))(e);\n    }\n};\n\nconst handleInviteSubmit = async function(e) {\n    e.preventDefault();\n\n    const groupId = $(this).data('groupid');\n    const userId = +$('input.js-invite-radio[type=radio]:checked').val();\n\n    const {errorcode} = await inviteUser(userId, groupId);\n\n    if (errorcode === 0) {\n        window.location.reload();\n    } else {\n        console.log(errorcode);\n    }\n};\n"],"names":["click","handleSearchInviteButton","keyup","handleSearchKeyup","handleInviteSubmit","e","preventDefault","groupId","this","data","searchString","val","users","Template","renderForPromise","html","keyCode","KeyCodes","enter","bind","userId","errorcode","window","location","reload","console","log"],"mappings":"6iCAMoB,+BACd,gCAAgCA,MAAMC,8CACtC,2BAA2BC,MAAMC,uCACjC,yBAAyBH,MAAMI,oCAG/BH,0EAA2B,iBAAeI,yKAC5CA,EAAEC,iBAEIC,SAAU,mBAAEC,MAAMC,KAAK,WACvBC,cAAe,mBAAE,2BAA2BC,uBAE9B,iCAAkBD,aAAcH,uBAA9CK,oCAEeC,mBAASC,iBAAiB,mDAAoD,CAC/FF,MAAAA,mDADGG,2BAAAA,yBAIL,0BAA0BA,KAAKA,qHAG/BZ,kBAAoB,SAASE,GAC3BA,EAAEW,UAAYC,mBAASC,OACvBjB,yBAAyBkB,MAAK,mBAAE,gCAAhClB,CAAiEI,IAInED,qEAAqB,kBAAeC,iKACtCA,EAAEC,iBAEIC,SAAU,mBAAEC,MAAMC,KAAK,WACvBW,SAAU,mBAAE,6CAA6CT,wBAErC,0BAAWS,OAAQb,iDAE3B,KAFXc,4BAAAA,WAGHC,OAAOC,SAASC,SAEhBC,QAAQC,IAAIL"}