define("local_learningcompanions/learningcompanions_chat",["jquery"],(function($){return{init:function(){var sendButton=$("#local_learningcompanions_chat-send");$("#id_messageeditable").after(sendButton),$("#local_learningcompanions_chat-send").on("click",(function(e){if(1!=e.target.getAttribute("disabled")){e.preventDefault();var data={};return $("#learningcompanions_chat form input, #learningcompanions_chat form textarea").each(((index,el)=>{data[el.name]=el.value})),$("#learningcompanions_chat #id_messageeditable").css("opacity","0.5"),$("#learningcompanions_chat #id_messageeditable").attr("contenteditable","false"),$("#learningcompanions_chat form input,  #learningcompanions_chat form textarea, #local_learningcompanions_chat-send").attr("disabled",!0),$.post(M.cfg.wwwroot+"/local/learningcompanions/ajaxsubmit.php",data).done((function(a,b,c){$("#learningcompanions_chat form #id_messageeditable").text(""),$("#learningcompanions_chat form input, #learningcompanions_chat form textarea").each(((index,el)=>{"textarea"!=el.name&&"hidden"===el.type||(el.value="")}))})).fail((function(a,b,c){console.warn("Failed sending via AJAX",a,b,c),window.alert("couldn't save")})).always((function(){$("#learningcompanions_chat #id_messageeditable").css("opacity","1"),$("#learningcompanions_chat #id_messageeditable").attr("contenteditable","true"),$("#learningcompanions_chat form input,  #learningcompanions_chat form textarea, #local_learningcompanions_chat-send").attr("disabled",!1)})),!1}}))}}}));

//# sourceMappingURL=learningcompanions_chat.min.js.map